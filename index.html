<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Practica Fracciones Pro - Mejorado</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Roboto', sans-serif; margin:0; background:#f4f4f9; color:#333; padding:20px;}
h1 { text-align:center; margin-bottom:20px; }
.card { background:#fff; border-radius:12px; box-shadow:0 6px 15px rgba(0,0,0,0.12); padding:20px; margin-bottom:25px;}
.step { margin:15px 0;}
.step label { font-weight:500; display:block; margin-bottom:4px;}
.step input { width:100%; padding:10px; font-size:16px; border-radius:6px; border:1px solid #ccc;}
.step button { margin-top:6px; padding:8px 14px; border:none; border-radius:6px; background:#0077cc; color:#fff; font-weight:bold; cursor:pointer; transition:0.2s;}
.step button:hover { background:#005fa3;}
.ok { color:green; font-weight:bold; }
.bad { color:red; font-weight:bold; }
.solution { background:#e6f0ff; padding:12px; border-radius:6px; margin-top:12px; font-size:15px;}
.notes { margin-top:15px; }
.notes textarea { width:100%; height:80px; padding:8px; border-radius:6px; border:1px solid #ccc; font-size:14px;}
#progress { width:100%; background:#ddd; border-radius:10px; overflow:hidden; height:20px; margin-bottom:20px; }
#progress_bar { height:100%; width:0; background:#28a745; transition:width 0.3s;}
</style>
</head>
<body>

<h1>Practica Fracciones Profesional</h1>

<div id="progress"><div id="progress_bar"></div></div>

<div id="exercise_container"></div>

<button onclick="nextExercise()" style="display:block; margin:0 auto; padding:10px 20px; border:none; border-radius:6px; background:#0077cc; color:#fff; font-weight:bold; cursor:pointer;">Siguiente ejercicio</button>

<script>
// Funciones matem√°ticas
function gcd(a,b){return b?gcd(b,a%b):a;}
function lcm(a,b){return a*b/gcd(a,b);}

// Generar ejercicios aleatorios
let exercises=[];
let currentEx=0;
let totalEx=5;

function generateExercises(){
  for(let i=0;i<totalEx;i++){
    let total=Math.floor(Math.random()*500)+100;
    let d1=Math.floor(Math.random()*5+2); // 2 a 6
    let d2=Math.floor(Math.random()*5+2); // 2 a 6
    let n1=Math.floor(total/d1);
    let n2=Math.floor(total/d2);
    let type = Math.random()>0.5 ? "moda":"comida";
    exercises.push({total,n1,d1,n2,d2,type});
  }
}

// Mostrar ejercicio
function showExercise(){
  let container=document.getElementById("exercise_container");
  container.innerHTML="";
  if(currentEx>=exercises.length){
    container.innerHTML="<h2>¬°Has completado todos los ejercicios!</h2>";
    document.getElementById("progress_bar").style.width="100%";
    return;
  }
  let ex=exercises[currentEx];
  let desc=ex.type==="moda" ? 
    `Una tienda ha vendido ${ex.total} prendas. ${ex.n1}/${ex.d1} son camisetas, ${ex.n2}/${ex.d2} son sudaderas. El resto son pantalones.` :
    `Se han preparado ${ex.total} platos. ${ex.n1}/${ex.d1} son pizzas, ${ex.n2}/${ex.d2} son hamburguesas. El resto ensaladas.`;

  let html=`<div class="card">
    <p><strong>Ejercicio ${currentEx+1}:</strong><br>${desc}</p>

    <div class="step">
      <label>1Ô∏è‚É£ Primer grupo:</label>
      <input type="text" id="step1" placeholder="Ej: 100">
      <button onclick="checkStep(1)">Comprobar</button>
      <p id="out1"></p>
    </div>

    <div class="step">
      <label>2Ô∏è‚É£ Segundo grupo:</label>
      <input type="text" id="step2" placeholder="Ej: 120">
      <button onclick="checkStep(2)">Comprobar</button>
      <p id="out2"></p>
    </div>

    <div class="step">
      <label>3Ô∏è‚É£ Resto:</label>
      <input type="text" id="step3" placeholder="Ej: 80">
      <button onclick="checkStep(3)">Comprobar</button>
      <p id="out3"></p>
    </div>

    <div class="solution" id="solution" style="display:none;">
      <strong>Soluci√≥n paso a paso:</strong><br>
      1Ô∏è‚É£ <em>Primer grupo:</em> Se divide el total (${ex.total}) por el denominador ${ex.d1} ‚Üí ${Math.floor(ex.total/ex.d1)}.<br>
      2Ô∏è‚É£ <em>Segundo grupo:</em> Se divide el total (${ex.total}) por el denominador ${ex.d2} ‚Üí ${Math.floor(ex.total/ex.d2)}.<br>
      3Ô∏è‚É£ <em>Resto:</em> Total - Primer grupo - Segundo grupo ‚Üí ${ex.total} - ${Math.floor(ex.total/ex.d1)} - ${Math.floor(ex.total/ex.d2)} = ${ex.total - Math.floor(ex.total/ex.d1) - Math.floor(ex.total/ex.d2)}.<br>
      ‚úÖ Esta explicaci√≥n te ayuda a entender paso a paso c√≥mo calcular cada parte.
    </div>

    <button onclick="showSolution()">Mostrar soluci√≥n completa</button>

    <div class="notes">
      <label>üìù Notas personales:</label>
      <textarea placeholder="Apunta aqu√≠ tus observaciones o recordatorios..."></textarea>
    </div>
  </div>`;

  container.innerHTML=html;
  updateProgress();
}

// Comprobar pasos
function checkStep(step){
  let ex=exercises[currentEx];
  let val=parseInt(document.getElementById(`step${step}`).value.trim());
  let out=document.getElementById(`out${step}`);
  let correct;
  if(step===1) correct=Math.floor(ex.total/ex.d1);
  if(step===2) correct=Math.floor(ex.total/ex.d2);
  if(step===3) correct=ex.total - Math.floor(ex.total/ex.d1) - Math.floor(ex.total/ex.d2);

  if(val===correct){
    out.textContent="‚úî Correcto";
    out.className="ok";
  }else{
    out.textContent=`‚úò Incorrecto, sugerencia: ${correct}`;
    out.className="bad";
  }
}

// Mostrar soluci√≥n completa
function showSolution(){
  document.getElementById("solution").style.display="block";
}

// Siguiente ejercicio
function nextExercise(){
  currentEx++;
  showExercise();
}

// Barra progreso
function updateProgress(){
  let perc=(currentEx/exercises.length)*100;
  document.getElementById("progress_bar").style.width=perc+"%";
}

// Inicializar
generateExercises();
showExercise();
</script>

</body>
</html>
